<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BookHaven</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <script src="assets/js/config.js"></script>

</head>
<body>

<nav class="navbar">
  <div class="logo">ðŸ“š BookHaven</div>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="book.html">Books</a></li>
    <li><a href="login.html">Login</a></li>
    <li><a href="cart.html">Cart</a></li>
  </ul>
</nav>

<section class="hero">
  <h2>Your cozy corner for books</h2>
  <p>Soft stories, quiet moments, endless reading</p>
</section>

<section class="container">
  <div class="grid">
    <div class="book">
      <h3>The Silent Algorithm</h3>
      <p>Logic hidden beneath beauty</p>
      <div class="price">â‚¹499</div>
      <a class="btn" href="book.html">View Book</a>
    </div>

    <div class="book">
      <h3>Pastel Secrets</h3>
      <p>Nothing is what it seems</p>
      <div class="price">â‚¹399</div>
      <a class="btn" href="book.html">View Book</a>
    </div>

    <div class="book">
      <h3>Hidden Pages</h3>
      <p>Stories between the lines</p>
      <div class="price">â‚¹299</div>
      <a class="btn" href="book.html">View Book</a>
    </div>
  </div>
</section>

<footer>
  Â© 2025 BookHaven â€¢ Read softly
</footer>

<script>
// Fetch and display books from API
async function loadBooks() {
  try {
    const response = await fetch(window.__BOOKHAVEN_CONFIG__.apiBase + '/books');

    if (!response.ok) {
      const text = await response.text();
      console.error('Failed to load books: HTTP ' + response.status + ' - ' + text);
      return;
    }

    const books = await response.json();
    console.log('Books loaded from API:', books);
    
    const grid = document.querySelector('.grid');
    grid.innerHTML = '';
    
    books.forEach(book => {
      const bookDiv = document.createElement('div');
      bookDiv.className = 'book';
      bookDiv.innerHTML = `
        <h3>${book.title}</h3>
        <p>${book.description || 'A wonderful book'}</p>
        <div class="price">â‚¹${book.price}</div>
        <a class="btn" href="book.html?id=${book.id}">View Book</a>
      `;
      grid.appendChild(bookDiv);
    });
  } catch (error) {
    console.error('Failed to load books:', error);
  }
}

// Load books when page loads
window.addEventListener('DOMContentLoaded', loadBooks);
</script>

</body>
</html>
